---
title: "第5-10天：从代码到产品（测试、落地页和猫咪主题）"
date: "2026-01-30"
summary: "盘盘猫开发日记第5-10天：Vitest测试冲刺、盘盘猫品牌的诞生、落地页设计、Stripe集成，以及以小鱼干为货币的积分经济。"
tags: ["AI", "Software Development"]
series: "盘盘猫开发日记"
part: 3
type: "Post"
status: "Published"
---

第一周是基础设施建设。这一周的目标是把monorepo变成一个看起来、用起来都像真正产品的东西。

## 第5-8天：测试冲刺 — 147次Commit

在整个monorepo中搭建了Vitest。我的测试优先级顺序是刻意安排的：

**1. 先测共享包** — API流式传输工具、Supabase客户端、积分管理。这些是承重墙。如果`createAIStreamResponse()`有bug，所有15条流式路由都会挂。如果积分扣减存在竞态条件，用户要么白嫖要么被双重扣费。光是流式传输工具就写了36个测试，覆盖了每一条代码路径：成功完成流式传输、流中途出错并退还积分、内容过滤截断、SSE事件格式化。

**2. 再测领域计算逻辑** — 八字推算、塔罗抽牌、六壬起卦。我没法亲自验证正确性（零领域知识），但我可以验证确定性行为：相同的出生数据永远产出相同的命盘，相同的洗牌永远产出预期的分布，相同的卦象永远映射到相同的含义。

**3. 最后是API路由集成测试** — mock认证token，验证积分扣减，确认SSE事件格式与前端预期一致。

GitHub Actions CI流水线：lint → type-check → build → test。每个PR都走完整流程。这听起来很标准，但对于独立开发者来说，这就是"我觉得能用"和"我知道能用"之间的区别。

4天147次commit。不光鲜。但到最后，我有了信心——当我开始更快速地迭代时，平台不会崩。

## 第9-10天：品牌和变现 — 100次Commit

### 猫咪主题

PanPanMao（盼盼猫）。会算命的猫。看命运的猫。

当猫咪主题确定之后，一切都像多米诺骨牌一样接连到位。每个应用都有了猫咪风格的装扮。积分货币变成了小鱼干。毕竟，还有什么比小鱼干更适合用来付算命猫的报酬呢？

品牌决策是产品决策，不是营销决策。算命可能让人觉得吓人或者像骗人的。猫咪让它变得亲切。用户分享结果是因为"有趣"，而不是因为"准确"。这个区别对传播性至关重要。

### Stripe集成

四个积分套餐，用的是经典的定价心理学：

- 10积分 / $6.99（入门档）

- 50积分 / $24.99（量大优惠）

- 150积分 / $59.99 — **最受欢迎** 标签（锚定档）

- 500积分 / $149.99（高级用户）

"最受欢迎"标签不只是一个标注——它是一个价格锚点。后来我测试把它去掉，那个档位的转化率明显下降了。套餐心理学是真实存在的。

我定价时让每次解读大约花费$0.40-$1.10美元。积分抽象层很关键：用户更愿意花5条小鱼干而不是$0.70。把货币从"积分"改名为"小鱼干"后，用户感知到的消费阻力降低了。

### 落地页v1

暖棕和金色调。移动端优先。"千年智慧 × 现代AI"标语。Claude帮我写了中文文案——那句标语是从一次头脑风暴中，我评估了20个方案后选出来的。

这个落地页后来被彻底重新设计为暗黑奢华风（第12-19天），因为"温馨"的感觉削弱了用户对算命平台应有的庄重感。

## 这周学到了什么

**测试是投资，不是成本。** 它在品牌重塑的过程中立刻回本了。换主题、改积分货币名称、更新6个应用的UI文案——测试套件捕获了三个我差点就上线的回归bug。

**品牌是产品决策。** 猫咪主题让平台在一个可能令人生畏的领域变得亲切。它改变了用户与产品互动的方式。

**定价是心理学，不是数学。** 我在积分套餐命名上花的时间比支付流程的代码还多。

**AI做领域品牌同样好使。** Claude生成的中文文案是我自己写不出来的。整个平台的多语言（zh-CN/zh-TW/en）i18n支持都是AI翻译加人工审校完成的。
